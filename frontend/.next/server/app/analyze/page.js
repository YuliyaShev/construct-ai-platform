(()=>{var e={};e.id=241,e.ids=[241],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43403:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=a(50482),r=a(69108),l=a(62563),n=a.n(l),i=a(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["analyze",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,36770)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/analyze/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,59172)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/juliashevchuk/construct-ai-platform/frontend/src/app/analyze/page.tsx"],u="/analyze/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/analyze/page",pathname:"/analyze",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65267:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,26840,23)),Promise.resolve().then(a.t.bind(a,38771,23)),Promise.resolve().then(a.t.bind(a,13225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,43982,23))},42755:(e,t,a)=>{Promise.resolve().then(a.bind(a,31885))},33457:(e,t,a)=>{Promise.resolve().then(a.bind(a,11858)),Promise.resolve().then(a.bind(a,41845))},96885:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},97273:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(53267),r=a.n(s)},53267:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=a(39694);a(95344),a(3729);let r=s._(a(60546));function l(e,t){let a={loading:e=>{let{error:t,isLoading:a,pastDelay:s}=e;return null}};return"function"==typeof e&&(a.loader=e),(0,r.default)({...a,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38354:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let s=a(63689);function r(e){let{reason:t,children:a}=e;throw new s.BailoutToCSRError(t)}},60546:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=a(95344),r=a(3729),l=a(38354);function n(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},a=(0,r.lazy)(()=>t.loader().then(n)),o=t.loading;function d(e){let n=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,s.jsx)(a,{...e}):(0,s.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(r.Suspense,{fallback:n,children:i})}return d.displayName="LoadableComponent",d}},31885:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(95344),r=a(3729),l=a(5094),n=a(46540),i=a(23673),o=a(19003);function d({className:e,children:t}){return s.jsx("div",{className:(0,o.cn)("overflow-y-auto custom-scrollbar",e),children:t})}var c=a(59996);let u=e=>{if(!e)return"0 B";let t=["B","KB","MB","GB"],a=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),s=e/Math.pow(1024,a);return`${s.toFixed(s>=10||0===a?0:1)} ${t[a]}`};var x=a(69224);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,x.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),p=(0,x.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),m=(0,x.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),f=(0,x.Z)("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var b=a(96885);function v({file:e,selected:t,busy:a,onClick:r,onPreview:n,onAnalyze:i,onDownload:d}){return s.jsx("div",{onClick:r,className:(0,o.cn)("group cursor-pointer rounded-lg border border-transparent px-3 py-3 transition-all duration-200","hover:border-slate-200 hover:bg-slate-50 dark:hover:bg-zinc-900/60",t&&"border-brand-500/50 bg-brand-50 dark:bg-brand-500/10"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1 rounded-md bg-slate-100 dark:bg-zinc-800 p-2",children:s.jsx(h,{className:"h-5 w-5 text-brand-600"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 line-clamp-1",children:e.original_name}),s.jsx(c.C,{children:u(e.size)})]}),s.jsx("div",{className:"text-xs text-slate-500",children:e.created_at?new Date(e.created_at).toLocaleString():"â€”"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,s.jsxs)(l.z,{size:"xs",variant:"secondary",onClick:e=>{e.stopPropagation(),n()},disabled:a,children:[a?s.jsx(p,{className:"h-4 w-4 animate-spin"}):s.jsx(m,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-1",children:"Preview"})]}),(0,s.jsxs)(l.z,{size:"xs",variant:"outline",onClick:e=>{e.stopPropagation(),i()},disabled:a,children:[s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-1",children:"Analyze"})]}),(0,s.jsxs)(l.z,{size:"xs",onClick:e=>{e.stopPropagation(),d()},disabled:a,children:[s.jsx(b.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"ml-1",children:"Download"})]})]})]})]})})}function j({files:e,search:t,onSearch:a,onSelect:r,onPreview:l,onAnalyze:o,onDownload:c,selectedId:u,busyId:x}){let h=e.filter(e=>e.original_name.toLowerCase().includes(t.toLowerCase()));return(0,s.jsxs)(i.Zb,{className:"bg-gradient-to-b from-purple-50/60 to-white dark:from-zinc-900 dark:to-black border-slate-200/70 dark:border-zinc-800",children:[(0,s.jsxs)(i.Ol,{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx(i.ll,{children:"Uploaded Files"}),(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:[h.length," items"]})]}),s.jsx(n.I,{value:t,onChange:e=>a(e.target.value),placeholder:"Search files...",className:"bg-white/70 dark:bg-zinc-900"})]}),s.jsx(i.aY,{className:"p-0",children:s.jsx(d,{className:"h-[70vh] px-3",children:(0,s.jsxs)("div",{className:"space-y-2 pb-3",children:[0===h.length&&s.jsx("div",{className:"text-sm text-slate-500 px-2 py-4",children:"No files match your search."}),h.map(e=>s.jsx(v,{file:e,selected:u===e.id,busy:x===e.id,onClick:()=>r(e),onPreview:()=>l(e),onAnalyze:()=>o(e),onDownload:()=>c(e)},e.id))]})})})]})}function g(){return(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx(c.O,{className:"h-4 w-1/2"}),s.jsx(c.O,{className:"h-4 w-full"}),s.jsx(c.O,{className:"h-4 w-5/6"}),s.jsx(c.O,{className:"h-4 w-3/4"}),s.jsx(c.O,{className:"h-4 w-2/3"})]})}var y=a(96838);function w({file:e,analysis:t,loading:a}){return(0,s.jsxs)(i.Zb,{className:"sticky top-6 h-fit bg-gradient-to-b from-white to-slate-50 dark:from-zinc-950 dark:to-black border-slate-200 dark:border-zinc-800 shadow-lg",children:[s.jsx(i.Ol,{className:"flex flex-col gap-1",children:(0,s.jsxs)(i.ll,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Analysis Result"}),e&&s.jsx("span",{className:"text-xs text-slate-500",children:e.original_name})]})}),(0,s.jsxs)(i.aY,{children:[a&&s.jsx(g,{}),!a&&!e&&s.jsx(y.u,{title:"Select a file",description:"Choose a file on the left and run Analyze to view results."}),!a&&e&&s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:t||"No text extracted yet."})})]})]})}function N(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),g=(0,r.useMemo)(()=>async()=>{try{let e=await fetch("/api/files");if(!e.ok)throw Error("Failed to load files");let a=await e.json();t(a||[])}catch(e){console.error(e),v("Failed to load files.")}},[]),y=async e=>{try{x(e.id),v(null);let t=await fetch(`/api/download/${e.id}`);if(!t.ok)throw Error("Preview failed");let a=await t.blob(),s=URL.createObjectURL(a);p(e=>(e&&URL.revokeObjectURL(e),s)),f(!0)}catch(e){console.error(e),v("Failed to preview file.")}finally{x(null)}},N=async e=>{try{o(e),x(e.id),v(`Analyzing ${e.original_name}...`),c("");let t=await fetch(`/api/analyze/${e.id}`,{method:"POST"});if(!t.ok)throw Error("Analyze failed");let a=await t.json();c(a?.text||"No text extracted."),v(`Analysis ready for ${e.original_name}`)}catch(e){console.error(e),v("Failed to analyze file.")}finally{x(null)}};return(0,r.useEffect)(()=>(g(),()=>{h&&URL.revokeObjectURL(h)}),[g,h]),(0,s.jsxs)("div",{className:"mx-auto max-w-7xl p-6 lg:p-10 grid gap-6 lg:grid-cols-[320px_1fr]",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Workspace"}),s.jsx("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Analyze Files"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Preview, analyze, and download uploaded shop drawings."})]}),s.jsx(l.z,{variant:"outline",size:"sm",onClick:g,children:"Refresh"})]}),s.jsx(j,{files:e,search:a,onSearch:n,onSelect:o,onPreview:y,onAnalyze:N,onDownload:e=>{v(`Downloading ${e.original_name}...`),window.open(`/api/download/${e.id}`,"_blank")},selectedId:i?.id??null,busyId:u}),b&&s.jsx("div",{className:"text-xs text-emerald-600",children:b})]}),s.jsx(w,{file:i,analysis:d,loading:!!u&&i?.id===u}),s.jsx(k,{open:m,fileUrl:h,onClose:()=>f(!1),title:i?.original_name||"Selected PDF"})]})}let k=(0,a(97273).default)(async()=>{},{loadableGenerated:{modules:["/Users/juliashevchuk/construct-ai-platform/frontend/src/app/analyze/page.tsx -> @/components/analyze/PdfPreviewModal"]},ssr:!1})},11858:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ReactQueryClientProvider:()=>i});var s=a(95344),r=a(16165),l=a(26274),n=a(3729);function i({children:e}){let[t]=(0,n.useState)(()=>new r.S);return s.jsx(l.aH,{client:t,children:e})}},96838:(e,t,a)=>{"use strict";a.d(t,{u:()=>r});var s=a(95344);function r({title:e,description:t}){return(0,s.jsxs)("div",{className:"rounded-lg border border-dashed border-slate-200 dark:border-zinc-800 bg-slate-50 dark:bg-zinc-900/40 p-6 text-center space-y-2",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:e}),t&&s.jsx("div",{className:"text-xs text-slate-500",children:t})]})}},59996:(e,t,a)=>{"use strict";a.d(t,{C:()=>n,O:()=>l});var s=a(95344),r=a(19003);function l({className:e}){return s.jsx("div",{className:(0,r.cn)("animate-pulse rounded-md bg-slate-200 dark:bg-zinc-800",e)})}function n({children:e,className:t}){return s.jsx("span",{className:(0,r.cn)("inline-flex items-center rounded-full bg-slate-100 dark:bg-zinc-800 px-2.5 py-0.5 text-[11px] font-medium text-slate-700 dark:text-slate-200",t),children:e})}},41845:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95344),r=a(56506),l=a(8428),n=a(72086),i=a(87164),o=a(6585),d=a(81186),c=a(88322),u=a(20016);let x=[{href:"/",label:"Dashboard",icon:n.Z},{href:"/upload",label:"Upload PDF",icon:i.Z},{href:"/shop-drawing",label:"Shop Drawing",icon:o.Z},{href:"/bom",label:"BOM Extractor",icon:d.Z},{href:"/rfi",label:"RFIs",icon:c.Z},{href:"/image",label:"Image AI",icon:u.Z}];function h(){let e=(0,l.usePathname)();return(0,s.jsxs)("aside",{className:"hidden md:flex flex-col border-r border-slate-200 bg-white px-4 py-6",style:{width:"var(--sidebar-width)"},children:[s.jsx("div",{className:"text-xl font-semibold text-brand-700 px-3 mb-8",children:"Construct AI"}),s.jsx("nav",{className:"flex-1 space-y-2",children:x.map(({href:t,label:a,icon:l})=>{let n=e===t;return(0,s.jsxs)(r.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${n?"bg-brand-50 text-brand-700 font-semibold":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(l,{size:18}),a]},t)})}),s.jsx("div",{className:"text-xs text-slate-500 px-3",children:"v1.0 \xb7 AI Construction Suite"})]})}var p=a(33037);let m={"/":"Dashboard","/upload":"Upload & Analyze PDF","/shop-drawing":"Shop Drawing Checker","/bom":"BOM Extractor","/compare":"Compare Revisions","/rfi":"Auto RFI Generator","/image":"Image Analyzer"};function f(){let e=m[(0,l.usePathname)()]??"Workspace";return(0,s.jsxs)("header",{className:"topbar px-6 py-4 flex items-center justify-between",children:[s.jsx("div",{className:"text-lg font-semibold text-slate-800",children:e}),s.jsx("div",{className:"flex items-center gap-3 text-slate-500",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100",children:s.jsx(p.Z,{size:18})})})]})}function b({children:e}){return(0,s.jsxs)("div",{className:"layout-shell",children:[s.jsx(h,{}),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen",children:[s.jsx(f,{}),s.jsx("main",{className:"p-6 bg-slate-50 flex-1",children:e})]})]})}},5094:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(95344),r=a(3729),l=a(49247),n=a(19003);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-brand-600 text-white hover:bg-brand-700",secondary:"bg-slate-100 text-slate-800 hover:bg-slate-200",ghost:"text-slate-700 hover:bg-slate-100",outline:"border border-slate-200 text-slate-800 hover:bg-slate-50"},size:{default:"h-10 px-4",sm:"h-9 px-3",xs:"h-8 px-2.5 text-xs",lg:"h-11 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:t,size:a,...r},l)=>s.jsx("button",{ref:l,className:(0,n.cn)(i({variant:t,size:a}),e),...r}));o.displayName="Button"},23673:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>n,Zb:()=>l,aY:()=>o,ll:()=>i});var s=a(95344);a(3729);var r=a(19003);function l({className:e,...t}){return s.jsx("div",{className:(0,r.cn)("rounded-xl border border-slate-200 bg-white shadow-card",e),...t})}function n({className:e,...t}){return s.jsx("div",{className:(0,r.cn)("border-b border-slate-100 px-5 py-4",e),...t})}function i({className:e,...t}){return s.jsx("h3",{className:(0,r.cn)("text-base font-semibold text-slate-900",e),...t})}function o({className:e,...t}){return s.jsx("div",{className:(0,r.cn)("px-5 py-4",e),...t})}},46540:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(95344),r=a(3729),l=a(19003);let n=r.forwardRef(({className:e,...t},a)=>s.jsx("input",{ref:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",e),...t}));n.displayName="Input"},19003:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(56815),r=a(79377);function l(...e){return(0,r.m6)((0,s.W)(e))}},36770:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let s=(0,a(86843).createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/analyze/page.tsx`),{__esModule:r,$$typeof:l}=s,n=s.default},59172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p,metadata:()=>h});var s=a(25036),r=a(86843);let l=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let o=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx#ReactQueryClientProvider`);a(5023),a(26904),a(36341);let d=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/components/layout/AppShell.tsx`),{__esModule:c,$$typeof:u}=d,x=d.default,h={title:"AI Construction Assistant",description:"AI-powered construction document assistant"};function p({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:s.jsx(o,{children:s.jsx(x,{children:e})})})})}},5023:()=>{},36341:()=>{},26904:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,3317,4636],()=>a(43403));module.exports=s})();