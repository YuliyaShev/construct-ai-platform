(()=>{var e={};e.id=5676,e.ids=[5676],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(50482),r=s(69108),l=s(62563),n=s.n(l),i=s(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,95869)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59172)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx"],u="/upload/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65267:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},33457:(e,t,s)=>{Promise.resolve().then(s.bind(s,11858)),Promise.resolve().then(s.bind(s,41845))},64707:(e,t,s)=>{Promise.resolve().then(s.bind(s,50632))},36421:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]])},97273:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(53267),r=s.n(a)},53267:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=s(39694);s(95344),s(3729);let r=a._(s(60546));function l(e,t){let s={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};return"function"==typeof e&&(s.loader=e),(0,r.default)({...s,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38354:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(63689);function r(e){let{reason:t,children:s}=e;throw new a.BailoutToCSRError(t)}},60546:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=s(95344),r=s(3729),l=s(38354);function n(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(n)),o=t.loading;function d(e){let n=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsx)(s,{...e}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(r.Suspense,{fallback:n,children:i})}return d.displayName="LoadableComponent",d}},11858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactQueryClientProvider:()=>i});var a=s(95344),r=s(16165),l=s(26274),n=s(3729);function i({children:e}){let[t]=(0,n.useState)(()=>new r.S);return a.jsx(l.aH,{client:t,children:e})}},50632:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(95344),r=s(3729),l=s(5094),n=s(29824),i=s(34831),o=s(37999);let d=e=>{if(!e)return"0 B";let t=["B","KB","MB","GB"],s=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),a=e/Math.pow(1024,s);return`${a.toFixed(a>=10||0===s?0:1)} ${t[s]}`};function c(){let[e,t]=(0,r.useState)(null),[s,c]=(0,r.useState)(!1),[u,x]=(0,r.useState)([]),[p,f]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[b,j]=(0,r.useState)(void 0),[v,g]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[P,N]=(0,r.useState)(null),_=async()=>{try{let e=await fetch("/api/files");if(!e.ok)throw Error("Failed to load files");let t=await e.json();x(t||[])}catch(e){console.error(e),w("Failed to load files.")}},k=async()=>{if(!e){w("Please select a PDF file.");return}try{c(!0),w(null);let s=new FormData;s.append("file",e);let a=await fetch("/api/upload-pdf",{method:"POST",body:s});if(!a.ok)throw Error("Upload failed");await a.json(),w(`Uploaded ${e.name}`),t(null),g(null),await _()}catch(e){console.error(e),w("Upload failed. Please try again.")}finally{c(!1)}},S=async e=>{try{N(e.id),w(null);let t=await fetch(`/api/files/${e.id}/download`);if(!t.ok)throw Error("Preview failed");let s=await t.blob(),a=URL.createObjectURL(s);f(e=>(e&&URL.revokeObjectURL(e),a)),j(e.original_name),m(!0)}catch(e){console.error(e),w("Failed to load preview.")}finally{N(null)}},D=async e=>{try{N(e.id),w(`Analyzing ${e.original_name}...`);let t=await fetch(`/api/files/${e.id}/analyze`,{method:"POST"});if(!t.ok)throw Error("Analyze failed");let s=await t.json();g(s?.text||"No text extracted."),w(`Analysis ready for ${e.original_name}`)}catch(e){console.error(e),w("Failed to analyze file.")}finally{N(null)}},z=e=>{w(`Downloading ${e.original_name}...`),window.open(`/api/files/${e.id}/download`,"_blank")};return(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>()=>{p&&URL.revokeObjectURL(p)},[p]),(0,a.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Upload & File Management"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Drop PDFs, store them, preview, download, and run quick text extraction."})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Upload a PDF"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Preferred format: PDF"})]}),a.jsx(l.z,{onClick:k,disabled:s||!e,children:s?"Uploading...":"Upload"})]}),a.jsx(i.Z,{accept:".pdf",onFile:e=>t(e)}),e&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-slate-700",children:["Selected: ",a.jsx("span",{className:"font-semibold",children:e.name})]}),y&&a.jsx("div",{className:"mt-2 text-xs text-emerald-600",children:y})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Files"}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["Showing ",u.length," file(s)"]})]}),a.jsx(l.z,{variant:"outline",size:"sm",onClick:_,children:"Refresh"})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(n.iA,{children:[a.jsx(n.Et,{children:(0,a.jsxs)(n.TR,{children:[a.jsx(n.TH,{children:"Name"}),a.jsx(n.TH,{children:"Size"}),a.jsx(n.TH,{children:"Created"}),a.jsx(n.TH,{className:"text-right",children:"Actions"})]})}),(0,a.jsxs)(n.XP,{children:[0===u.length&&a.jsx(n.TR,{children:a.jsx(n.TD,{colSpan:4,className:"text-center text-slate-500 py-6",children:"No files uploaded yet."})}),u.map(e=>(0,a.jsxs)(n.TR,{children:[a.jsx(n.TD,{className:"font-semibold text-slate-900",children:e.original_name}),a.jsx(n.TD,{children:d(e.size)}),a.jsx(n.TD,{children:e.created_at?new Date(e.created_at).toLocaleString():"â€”"}),a.jsx(n.TD,{children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx(l.z,{size:"sm",variant:"secondary",onClick:()=>S(e),disabled:P===e.id,children:"Preview"}),a.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>D(e),disabled:P===e.id,children:"Analyze"}),a.jsx(l.z,{size:"sm",onClick:()=>z(e),children:"Download"})]})})]},e.id))]})]})})]}),v&&(0,a.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm p-4",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Analysis Result"}),a.jsx("pre",{className:"text-xs text-slate-800 whitespace-pre-wrap max-h-96 overflow-auto",children:v})]}),a.jsx(o.Z,{open:h,fileUrl:p,onClose:()=>m(!1),title:b})]})}},41845:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95344),r=s(56506),l=s(8428),n=s(72086),i=s(87164),o=s(6585),d=s(81186),c=s(88322),u=s(20016);let x=[{href:"/",label:"Dashboard",icon:n.Z},{href:"/upload",label:"Upload PDF",icon:i.Z},{href:"/shop-drawing",label:"Shop Drawing",icon:o.Z},{href:"/bom",label:"BOM Extractor",icon:d.Z},{href:"/rfi",label:"RFIs",icon:c.Z},{href:"/image",label:"Image AI",icon:u.Z}];function p(){let e=(0,l.usePathname)();return(0,a.jsxs)("aside",{className:"hidden md:flex flex-col border-r border-slate-200 bg-white px-4 py-6",style:{width:"var(--sidebar-width)"},children:[a.jsx("div",{className:"text-xl font-semibold text-brand-700 px-3 mb-8",children:"Construct AI"}),a.jsx("nav",{className:"flex-1 space-y-2",children:x.map(({href:t,label:s,icon:l})=>{let n=e===t;return(0,a.jsxs)(r.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${n?"bg-brand-50 text-brand-700 font-semibold":"text-slate-700 hover:bg-slate-100"}`,children:[a.jsx(l,{size:18}),s]},t)})}),a.jsx("div",{className:"text-xs text-slate-500 px-3",children:"v1.0 \xb7 AI Construction Suite"})]})}var f=s(33037);let h={"/":"Dashboard","/upload":"Upload & Analyze PDF","/shop-drawing":"Shop Drawing Checker","/bom":"BOM Extractor","/compare":"Compare Revisions","/rfi":"Auto RFI Generator","/image":"Image Analyzer"};function m(){let e=h[(0,l.usePathname)()]??"Workspace";return(0,a.jsxs)("header",{className:"topbar px-6 py-4 flex items-center justify-between",children:[a.jsx("div",{className:"text-lg font-semibold text-slate-800",children:e}),a.jsx("div",{className:"flex items-center gap-3 text-slate-500",children:a.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100",children:a.jsx(f.Z,{size:18})})})]})}function b({children:e}){return(0,a.jsxs)("div",{className:"layout-shell",children:[a.jsx(p,{}),(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[a.jsx(m,{}),a.jsx("main",{className:"p-6 bg-slate-50 flex-1",children:e})]})]})}},34831:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(95344),r=s(3729),l=s(36421),n=s(5094);function i({onFile:e,accept:t=".pdf,image/*"}){let[s,i]=(0,r.useState)(!1),o=(0,r.useId)(),d=(0,r.useRef)(null),c=(0,r.useCallback)(t=>{t&&t[0]&&e(t[0])},[e]);return a.jsx("div",{onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:e=>{e.preventDefault(),i(!1),c(e.dataTransfer.files)},className:`border-2 border-dashed rounded-xl p-6 text-center bg-white ${s?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(l.Z,{className:"text-brand-600"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Drag & drop a file, or select"}),a.jsx("input",{type:"file",accept:t,className:"hidden",id:o,ref:d,onChange:e=>c(e.target.files)}),a.jsx(n.z,{type:"button",variant:"secondary",onClick:()=>{d.current&&d.current.click()},children:"Browse Files"})]})})}},37999:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(97273).default)(async()=>{},{loadableGenerated:{modules:["/Users/juliashevchuk/construct-ai-platform/frontend/src/components/pdf/PdfPreviewNoSSR.tsx -> ./PdfPreview"]},ssr:!1})},5094:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var a=s(95344),r=s(3729),l=s(49247),n=s(19003);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-brand-600 text-white hover:bg-brand-700",secondary:"bg-slate-100 text-slate-800 hover:bg-slate-200",ghost:"text-slate-700 hover:bg-slate-100",outline:"border border-slate-200 text-slate-800 hover:bg-slate-50"},size:{default:"h-10 px-4",sm:"h-9 px-3",xs:"h-8 px-2.5 text-xs",lg:"h-11 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:t,size:s,...r},l)=>a.jsx("button",{ref:l,className:(0,n.cn)(i({variant:t,size:s}),e),...r}));o.displayName="Button"},29824:(e,t,s)=>{"use strict";s.d(t,{Et:()=>n,TD:()=>c,TH:()=>d,TR:()=>o,XP:()=>i,iA:()=>l});var a=s(95344);s(3729);var r=s(19003);function l({className:e,...t}){return a.jsx("table",{className:(0,r.cn)("w-full text-sm text-left",e),...t})}function n({className:e,...t}){return a.jsx("thead",{className:(0,r.cn)("text-xs uppercase text-slate-500",e),...t})}function i({className:e,...t}){return a.jsx("tbody",{className:(0,r.cn)("divide-y divide-slate-100",e),...t})}function o({className:e,...t}){return a.jsx("tr",{className:(0,r.cn)("hover:bg-slate-50",e),...t})}function d({className:e,...t}){return a.jsx("th",{className:(0,r.cn)("px-3 py-2 font-semibold",e),...t})}function c({className:e,...t}){return a.jsx("td",{className:(0,r.cn)("px-3 py-2 text-slate-800",e),...t})}},19003:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(56815),r=s(79377);function l(...e){return(0,r.m6)((0,a.W)(e))}},59172:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,metadata:()=>p});var a=s(25036),r=s(86843);let l=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let o=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx#ReactQueryClientProvider`);s(5023),s(26904),s(36341);let d=(0,r.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/components/layout/AppShell.tsx`),{__esModule:c,$$typeof:u}=d,x=d.default,p={title:"AI Construction Assistant",description:"AI-powered construction document assistant"};function f({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:a.jsx(o,{children:a.jsx(x,{children:e})})})})}},95869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,s(86843).createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx`),{__esModule:r,$$typeof:l}=a,n=a.default},5023:()=>{},36341:()=>{},26904:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[1638,3317,4636],()=>s(32779));module.exports=a})();