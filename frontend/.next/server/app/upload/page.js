(()=>{var e={};e.id=5676,e.ids=[5676],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},93414:()=>{},32779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(50482),a=s(69108),l=s(62563),i=s.n(l),n=s(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,95869)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59172)),"/Users/juliashevchuk/construct-ai-platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx"],x="/upload/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65267:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},33457:(e,t,s)=>{Promise.resolve().then(s.bind(s,11858)),Promise.resolve().then(s.bind(s,41845))},64707:(e,t,s)=>{Promise.resolve().then(s.bind(s,50632))},36421:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]])},11858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactQueryClientProvider:()=>n});var r=s(95344),a=s(16165),l=s(26274),i=s(3729);function n({children:e}){let[t]=(0,i.useState)(()=>new a.S);return r.jsx(l.aH,{client:t,children:e})}},50632:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95344),a=s(3729),l=s(5094),i=s(29824),n=s(34831),o=s(21222);let d=e=>{if(!e)return"0 B";let t=["B","KB","MB","GB"],s=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),r=e/Math.pow(1024,s);return`${r.toFixed(r>=10||0===s?0:1)} ${t[s]}`};function c(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)(!1),[x,u]=(0,a.useState)([]),[h,m]=(0,a.useState)(null),[p,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(void 0),[b,g]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),[N,P]=(0,a.useState)(null),k=async()=>{try{let e=await fetch("/api/files");if(!e.ok)throw Error("Failed to load files");let t=await e.json();u(t||[])}catch(e){console.error(e),y("Failed to load files.")}},z=async()=>{if(!e){y("Please select a PDF file.");return}try{c(!0),y(null);let s=new FormData;s.append("file",e);let r=await fetch("/api/upload-pdf",{method:"POST",body:s});if(!r.ok)throw Error("Upload failed");await r.json(),y(`Uploaded ${e.name}`),t(null),g(null),await k()}catch(e){console.error(e),y("Upload failed. Please try again.")}finally{c(!1)}},S=async e=>{try{P(e.id),y(null);let t=await fetch(`/api/files/${e.id}/download`);if(!t.ok)throw Error("Preview failed");let s=await t.blob(),r=URL.createObjectURL(s);m(e=>(e&&URL.revokeObjectURL(e),r)),v(e.original_name),f(!0)}catch(e){console.error(e),y("Failed to load preview.")}finally{P(null)}},D=async e=>{try{P(e.id),y(`Analyzing ${e.original_name}...`);let t=await fetch(`/api/files/${e.id}/analyze`,{method:"POST"});if(!t.ok)throw Error("Analyze failed");let s=await t.json();g(s?.text||"No text extracted."),y(`Analysis ready for ${e.original_name}`)}catch(e){console.error(e),y("Failed to analyze file.")}finally{P(null)}},_=e=>{y(`Downloading ${e.original_name}...`),window.open(`/api/files/${e.id}/download`,"_blank")};return(0,a.useEffect)(()=>{k()},[]),(0,a.useEffect)(()=>()=>{h&&URL.revokeObjectURL(h)},[h]),(0,r.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Upload & File Management"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Drop PDFs, store them, preview, download, and run quick text extraction."})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Upload a PDF"}),r.jsx("div",{className:"text-xs text-slate-500",children:"Preferred format: PDF"})]}),r.jsx(l.z,{onClick:z,disabled:s||!e,children:s?"Uploading...":"Upload"})]}),r.jsx(n.Z,{accept:".pdf",onFile:e=>t(e)}),e&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-slate-700",children:["Selected: ",r.jsx("span",{className:"font-semibold",children:e.name})]}),w&&r.jsx("div",{className:"mt-2 text-xs text-emerald-600",children:w})]}),(0,r.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Files"}),(0,r.jsxs)("div",{className:"text-xs text-slate-500",children:["Showing ",x.length," file(s)"]})]}),r.jsx(l.z,{variant:"outline",size:"sm",onClick:k,children:"Refresh"})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)(i.iA,{children:[r.jsx(i.Et,{children:(0,r.jsxs)(i.TR,{children:[r.jsx(i.TH,{children:"Name"}),r.jsx(i.TH,{children:"Size"}),r.jsx(i.TH,{children:"Created"}),r.jsx(i.TH,{className:"text-right",children:"Actions"})]})}),(0,r.jsxs)(i.XP,{children:[0===x.length&&r.jsx(i.TR,{children:r.jsx(i.TD,{colSpan:4,className:"text-center text-slate-500 py-6",children:"No files uploaded yet."})}),x.map(e=>(0,r.jsxs)(i.TR,{children:[r.jsx(i.TD,{className:"font-semibold text-slate-900",children:e.original_name}),r.jsx(i.TD,{children:d(e.size)}),r.jsx(i.TD,{children:e.created_at?new Date(e.created_at).toLocaleString():"â€”"}),r.jsx(i.TD,{children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(l.z,{size:"sm",variant:"secondary",onClick:()=>S(e),disabled:N===e.id,children:"Preview"}),r.jsx(l.z,{size:"sm",variant:"outline",onClick:()=>D(e),disabled:N===e.id,children:"Analyze"}),r.jsx(l.z,{size:"sm",onClick:()=>_(e),children:"Download"})]})})]},e.id))]})]})})]}),b&&(0,r.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm p-4",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Analysis Result"}),r.jsx("pre",{className:"text-xs text-slate-800 whitespace-pre-wrap max-h-96 overflow-auto",children:b})]}),r.jsx(o.Z,{open:p,fileUrl:h,onClose:()=>f(!1),title:j})]})}},41845:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(95344),a=s(56506),l=s(8428),i=s(72086),n=s(87164),o=s(6585),d=s(81186),c=s(88322),x=s(20016);let u=[{href:"/",label:"Dashboard",icon:i.Z},{href:"/upload",label:"Upload PDF",icon:n.Z},{href:"/shop-drawing",label:"Shop Drawing",icon:o.Z},{href:"/bom",label:"BOM Extractor",icon:d.Z},{href:"/rfi",label:"RFIs",icon:c.Z},{href:"/image",label:"Image AI",icon:x.Z}];function h(){let e=(0,l.usePathname)();return(0,r.jsxs)("aside",{className:"hidden md:flex flex-col border-r border-slate-200 bg-white px-4 py-6",style:{width:"var(--sidebar-width)"},children:[r.jsx("div",{className:"text-xl font-semibold text-brand-700 px-3 mb-8",children:"Construct AI"}),r.jsx("nav",{className:"flex-1 space-y-2",children:u.map(({href:t,label:s,icon:l})=>{let i=e===t;return(0,r.jsxs)(a.default,{href:t,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition ${i?"bg-brand-50 text-brand-700 font-semibold":"text-slate-700 hover:bg-slate-100"}`,children:[r.jsx(l,{size:18}),s]},t)})}),r.jsx("div",{className:"text-xs text-slate-500 px-3",children:"v1.0 \xb7 AI Construction Suite"})]})}var m=s(33037);let p={"/":"Dashboard","/upload":"Upload & Analyze PDF","/shop-drawing":"Shop Drawing Checker","/bom":"BOM Extractor","/compare":"Compare Revisions","/rfi":"Auto RFI Generator","/image":"Image Analyzer"};function f(){let e=p[(0,l.usePathname)()]??"Workspace";return(0,r.jsxs)("header",{className:"topbar px-6 py-4 flex items-center justify-between",children:[r.jsx("div",{className:"text-lg font-semibold text-slate-800",children:e}),r.jsx("div",{className:"flex items-center gap-3 text-slate-500",children:r.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100",children:r.jsx(m.Z,{size:18})})})]})}function j({children:e}){return(0,r.jsxs)("div",{className:"layout-shell",children:[r.jsx(h,{}),(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[r.jsx(f,{}),r.jsx("main",{className:"p-6 bg-slate-50 flex-1",children:e})]})]})}},34831:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(95344),a=s(3729),l=s(36421),i=s(5094);function n({onFile:e,accept:t=".pdf,image/*"}){let[s,n]=(0,a.useState)(!1),o=(0,a.useId)(),d=(0,a.useRef)(null),c=(0,a.useCallback)(t=>{t&&t[0]&&e(t[0])},[e]);return r.jsx("div",{onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:()=>n(!1),onDrop:e=>{e.preventDefault(),n(!1),c(e.dataTransfer.files)},className:`border-2 border-dashed rounded-xl p-6 text-center bg-white ${s?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(l.Z,{className:"text-brand-600"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Drag & drop a file, or select"}),r.jsx("input",{type:"file",accept:t,className:"hidden",id:o,ref:d,onChange:e=>c(e.target.files)}),r.jsx(i.z,{type:"button",variant:"secondary",onClick:()=>{d.current&&d.current.click()},children:"Browse Files"})]})})}},21222:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(95344),a=s(3729),l=s(90620),i=s(47738),n=s(18452),o=s(51838),d=s(14513),c=s(5094),x=s(19003);function u({fileUrl:e,open:t,onClose:s,title:i}){let u=(0,a.useRef)(null),[h,m]=(0,a.useState)(1),[p,f]=(0,a.useState)(null),[j,v]=(0,a.useState)(1);return((0,a.useEffect)(()=>{if(!t)return;let s=!1;return(async()=>{if(e&&u.current)try{let t=(0,l.getDocument)(e),r=await t.promise;if(s)return;f(r.numPages);let a=await r.getPage(j);if(s)return;let i=a.getViewport({scale:h}),n=u.current,o=n.getContext("2d");if(!o)return;n.height=i.height,n.width=i.width,await a.render({canvasContext:o,viewport:i}).promise}catch(e){s||console.error("Failed to render PDF preview",e)}})(),()=>{s=!0}},[e,t,h,j]),(0,a.useEffect)(()=>{t||(m(1),v(1),f(null))},[t]),t)?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-5xl bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm uppercase tracking-wide text-slate-500",children:"PDF Preview"}),r.jsx("div",{className:"text-lg font-semibold text-slate-900 line-clamp-1",children:i||"Selected PDF"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(c.z,{size:"icon",variant:"outline",onClick:()=>m(e=>Math.max(.5,e-.1)),children:r.jsx(n.Z,{className:"h-4 w-4"})}),r.jsx(c.z,{size:"icon",variant:"outline",onClick:()=>m(e=>Math.min(3,e+.1)),children:r.jsx(o.Z,{className:"h-4 w-4"})}),r.jsx(c.z,{size:"icon",variant:"ghost",onClick:s,"aria-label":"Close preview",children:r.jsx(d.Z,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-auto bg-slate-50",children:e?r.jsx("div",{className:(0,x.cn)("flex justify-center py-4"),children:r.jsx("canvas",{ref:u,className:"shadow-sm border"})}):r.jsx("div",{className:"h-full flex items-center justify-center text-slate-500 text-sm",children:"No file selected."})}),(0,r.jsxs)("div",{className:"px-4 py-2 border-t text-xs text-slate-500 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:["Scale: ",(100*h).toFixed(0),"%"]}),(0,r.jsxs)("div",{children:["Page ",j," ",p?`of ${p}`:""]})]})]})}):null}l.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${i.i8}/pdf.worker.min.js`},5094:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(95344),a=s(3729),l=s(49247),i=s(19003);let n=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-brand-600 text-white hover:bg-brand-700",secondary:"bg-slate-100 text-slate-800 hover:bg-slate-200",ghost:"text-slate-700 hover:bg-slate-100",outline:"border border-slate-200 text-slate-800 hover:bg-slate-50"},size:{default:"h-10 px-4",sm:"h-9 px-3",xs:"h-8 px-2.5 text-xs",lg:"h-11 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,...a},l)=>r.jsx("button",{ref:l,className:(0,i.cn)(n({variant:t,size:s}),e),...a}));o.displayName="Button"},29824:(e,t,s)=>{"use strict";s.d(t,{Et:()=>i,TD:()=>c,TH:()=>d,TR:()=>o,XP:()=>n,iA:()=>l});var r=s(95344);s(3729);var a=s(19003);function l({className:e,...t}){return r.jsx("table",{className:(0,a.cn)("w-full text-sm text-left",e),...t})}function i({className:e,...t}){return r.jsx("thead",{className:(0,a.cn)("text-xs uppercase text-slate-500",e),...t})}function n({className:e,...t}){return r.jsx("tbody",{className:(0,a.cn)("divide-y divide-slate-100",e),...t})}function o({className:e,...t}){return r.jsx("tr",{className:(0,a.cn)("hover:bg-slate-50",e),...t})}function d({className:e,...t}){return r.jsx("th",{className:(0,a.cn)("px-3 py-2 font-semibold",e),...t})}function c({className:e,...t}){return r.jsx("td",{className:(0,a.cn)("px-3 py-2 text-slate-800",e),...t})}},19003:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(56815),a=s(79377);function l(...e){return(0,a.m6)((0,r.W)(e))}},59172:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,metadata:()=>h});var r=s(25036),a=s(86843);let l=(0,a.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let o=(0,a.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/providers.tsx#ReactQueryClientProvider`);s(5023),s(26904),s(36341);let d=(0,a.createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/components/layout/AppShell.tsx`),{__esModule:c,$$typeof:x}=d,u=d.default,h={title:"AI Construction Assistant",description:"AI-powered construction document assistant"};function m({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(o,{children:r.jsx(u,{children:e})})})})}},95869:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let r=(0,s(86843).createProxy)(String.raw`/Users/juliashevchuk/construct-ai-platform/frontend/src/app/upload/page.tsx`),{__esModule:a,$$typeof:l}=r,i=r.default},5023:()=>{},36341:()=>{},26904:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,3317,4636,6789],()=>s(32779));module.exports=r})();